{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/observer/watcher.js","../../src/compiler/base.js","../../src/state.js","../../src/compiler/template2Ast.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/vnode.js","../../src/vdom/index.js","../../src/index.js"],"sourcesContent":["export function isObject(data) {\r\n  return typeof data === 'object' && data !== null\r\n}\r\n","// 对会改变数组本身的方法进行重写\r\n// 总共7个 push shift unshift pop reverse sort splice\r\n\r\nlet oldArrayMethods = Array.prototype\r\n// value.__proto__ = arrayMethods 原型链向上查找,首先会找到重写的,找不到再向上找到原生的\r\n\r\nexport const arrayMethods = Object.create(oldArrayMethods)\r\n\r\nconst methods = ['push', 'shift', 'unshift', 'pop', 'sort', 'splice', 'reverse']\r\n\r\nmethods.forEach((method) => {\r\n  arrayMethods[method] = function (...args) {\r\n    console.log('用户调用了push方法')\r\n    const result = oldArrayMethods[method].apply(this, args)\r\n    // push unshift添加的元素可能还是对象需要再次监测\r\n    let inserted\r\n    let ob = this.__ob__\r\n    switch (method) {\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args\r\n        break\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n      default:\r\n        break\r\n    }\r\n    if (inserted) ob.observerArray(inserted)\r\n\r\n    return result\r\n  }\r\n})\r\n","export class Dep {\r\n  constructor() {\r\n    this.subs = []\r\n  }\r\n  depend() {\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this)\r\n    }\r\n  }\r\n  addSub(watcher) {\r\n    this.subs.push(watcher)\r\n  }\r\n  notify() {\r\n    this.subs.forEach((sub) => sub.update())\r\n  }\r\n}\r\n\r\n// target其实就是一个watcher的实例\r\n// 在模板编译的时候会 new Watcher(vm, 'c.d', (newVal) => {})\r\nDep.target = null\r\nconst targetStack = []\r\nexport function pushTarget(target) {\r\n  targetStack.push(target)\r\n  Dep.target = target\r\n}\r\nexport function popTarget() {\r\n  targetStack.pop()\r\n  Dep.target = targetStack[targetStack.length - 1]\r\n}\r\n","import { isObject } from '../utils/index.js'\r\nimport { arrayMethods } from './array.js'\r\nimport { Dep } from './dep.js'\r\n\r\nclass Observer {\r\n  constructor(value) {\r\n    // 递归解析对象,对每个对象进行监测\r\n    // 这样性能用有问题,vue3使用proxy直接怼整个进行检测,性能优化了不少\r\n    // value.__ob__ = this // 直接写导致内存溢出,应该是枚举相关问题\r\n    Object.defineProperty(value, '__ob__', this)\r\n\r\n    if (Array.isArray(value)) {\r\n      value.__proto__ = arrayMethods\r\n      // 尤大认为数组每一项的索引都检测会非常损耗性能\r\n      // 直接对数组的7个方法重写监听数组改变\r\n      this.observeArray(value)\r\n    } else {\r\n      this.walk(value)\r\n    }\r\n  }\r\n  observeArray(value) {\r\n    for (let i = 0; i < value.length; i++) {\r\n      observe(value[i])\r\n    }\r\n  }\r\n  walk(data) {\r\n    Object.keys(data).forEach((key) => {\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n}\r\n\r\nexport function proxy(vm, data) {\r\n  Object.keys(data).forEach((key) => {\r\n    Object.defineProperty(vm, key, {\r\n      configurable: true,\r\n      enumerable: true,\r\n      get: function () {\r\n        return vm._data[key]\r\n      },\r\n      set: function (newVal) {\r\n        vm._data[key] = newVal\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n  observe(value)\r\n  const dep = new Dep()\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      // 在编译模板会将target设置为watcher的实例,收集依赖\r\n      Dep.target && dep.addSub(Dep.target)\r\n      return value\r\n    },\r\n    set(newVal) {\r\n      if (newVal === value) {\r\n        return\r\n      }\r\n      observe(value)\r\n      value = newVal\r\n      // 发布更新\r\n      dep.notify()\r\n    }\r\n  })\r\n}\r\n\r\nexport function observe(data) {\r\n  if (!isObject(data)) {\r\n    return\r\n  }\r\n  return new Observer(data)\r\n}\r\n","import { pushTarget, popTarget } from './dep.js'\r\n\r\n// compiler => watcher => getVal执行getter将watcher的实例收集到dep =>\r\n// 每次setter的时候执行dep.notify()执行收集的所有watchers\r\nexport class Watcher {\r\n  constructor(vm, excepssion, cb, options = {}) {\r\n    this.vm = vm\r\n    this.excepssion = excepssion // eg: person.name, person.age\r\n    this.cb = cb\r\n    this.newDeps = []\r\n    this.value = this.getVal()\r\n    // options.user => watch的watcher\r\n    // options.lazy => computed的watcher\r\n    // !options.user => data的watcher\r\n    // 执行以下更新，第一次dom取数据渲染的时候\r\n    if (!options.user && !options.lazy) {\r\n      this.cb(this.value)\r\n    }\r\n  }\r\n  getVal() {\r\n    pushTarget(this)\r\n    let val = this.vm\r\n    // 循环取值\r\n    this.excepssion.split('.').forEach((key) => {\r\n      // 这里每次执行val[key]的时候，就回去执行proxy里面的getter方法\r\n      val = val[key]\r\n    })\r\n    popTarget()\r\n    return val\r\n  }\r\n  addDep(dep) {\r\n    this.newDeps.push(dep)\r\n  }\r\n  update() {\r\n    let arr = this.excepssion.split('.')\r\n    let val = this.vm\r\n    arr.forEach((k) => {\r\n      val = val[k]\r\n    })\r\n    const oldVal = this.value\r\n    this.value = val\r\n    this.cb.call(this.vm, val, oldVal)\r\n  }\r\n}\r\n","import { Watcher } from '../observer/watcher.js'\r\n\r\n/**\r\n * 最简单的模板编译操作\r\n * 直接解析template进行数据监听实现mvvm\r\n */\r\nexport default class Compiler {\r\n  constructor(el, vm) {\r\n    this.init(el, vm)\r\n  }\r\n  init(el, vm) {\r\n    vm.$el = document.querySelector(el)\r\n    // 创建一个文档碎片，这样处理更高效\r\n    let fragment = document.createDocumentFragment()\r\n    let child\r\n    while ((child = vm.$el.firstChild)) {\r\n      fragment.appendChild(child)\r\n    }\r\n    this.replace(fragment, vm)\r\n    vm.$el.appendChild(fragment)\r\n  }\r\n  replace(frag, vm) {\r\n    function compilerText(node) {\r\n      let txt = node.textContent\r\n      let reg = /\\{\\{(.*?)\\}\\}/g\r\n      if (reg.test(txt)) {\r\n        let update = (val) => (node.textContent = txt.replace(reg, val).trim())\r\n        let watcher = new Watcher(vm, RegExp.$1, update)\r\n        update(watcher.value)\r\n      }\r\n    }\r\n    function compilerEle(node) {\r\n      let nodeAttr = node.attributes\r\n      Array.from(nodeAttr).forEach((attr) => {\r\n        let name = attr.name,\r\n          exp = attr.value\r\n        if (name.includes('v-') || name.includes(':')) {\r\n          // 首次渲染要为数据创建watcher，后面就直接用update更新\r\n          // 暂时只对v-model写死做编译\r\n          let update = (val) => (node.value = val)\r\n          let watcher = new Watcher(vm, exp, update)\r\n          node.addEventListener('input', (e) => {\r\n            let newval = e.target.value\r\n            vm[exp] = newval\r\n          })\r\n          update(watcher.value)\r\n        }\r\n      })\r\n    }\r\n    Array.from(frag.childNodes).forEach((node) => {\r\n      if (node.nodeType === 3) {\r\n        // 文本节点\r\n        compilerText(node)\r\n      } else if (node.nodeType === 1) {\r\n        // 元素节点，这儿只做了v-model双向绑定的情况\r\n        compilerEle(node)\r\n      }\r\n      if (node.childNodes && node.childNodes.length) {\r\n        this.replace(node, vm)\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { observe, proxy } from './observer/index.js'\r\nimport { Compiler } from './compiler/base.js'\r\nimport { isObject } from './utils/index.js'\r\nimport { Watcher } from './observer/watcher.js'\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n\r\n  if (opts.props) {\r\n    initProps(vm)\r\n  }\r\n  if (opts.methods) {\r\n    initMethod(vm)\r\n  }\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm)\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm)\r\n  }\r\n}\r\n\r\nexport function stateMixin(Vue) {\r\n  Vue.prototype.$watch = function (expOrFn, cb, options) {\r\n    const vm = this\r\n    options = options || {}\r\n    options.user = true\r\n    const watcher = new Watcher(vm, expOrFn, cb, options)\r\n    // 第一次马上触发没有oldVal\r\n    if (options.immediate) {\r\n      cb.call(vm, watcher.value)\r\n    }\r\n    return function unwatchFn() {\r\n      watcher.teardown()\r\n    }\r\n  }\r\n}\r\nfunction createWatcher(vm, expOrFn, handler, options) {\r\n  if (isObject(handler)) {\r\n    options = handler\r\n    handler = handler.handler\r\n  }\r\n  if (typeof handler === 'string') {\r\n    handler = vm[handler]\r\n  }\r\n  return vm.$watch(expOrFn, handler, options)\r\n}\r\n\r\nfunction initProps() {}\r\nfunction initMethod(vm) {\r\n  let methods = vm.$options.methods\r\n  for (const key in methods) {\r\n    vm[key] = methods[key].bind(vm)\r\n  }\r\n}\r\nfunction initData(vm) {\r\n  // console.log('初始化数据', vm)\r\n  // 获取data,data可能是对象或者function\r\n  let data = vm.$options.data\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n  // 实现数据代理,让vm.a => vm._data.a\r\n  proxy(vm, data)\r\n  // 对数据劫持,监听数据改变实现MVVM,vue2.x主要用Obejct.defineProperty\r\n  observe(data)\r\n  // 模板编译\r\n  // new Compiler(vm.$options.el, vm)\r\n}\r\nfunction initComputed() {}\r\nfunction initWatch(vm) {\r\n  let watchs = vm.$options.watch\r\n  for (const key in watchs) {\r\n    const handler = watchs[key]\r\n    // watch允许回调依次执行数组的方法\r\n    if (Array.isArray(handler)) {\r\n      for (let i = 0; i < handler.length; i++) {\r\n        createWatcher(vm, key, handler[i])\r\n      }\r\n    } else {\r\n      createWatcher(vm, key, handler)\r\n    }\r\n  }\r\n}\r\n","// Regular Expressions for parsing tags and attributes\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z${unicodeRegExp.source}]*`\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\nconst startTagClose = /^\\s*(\\/?)>/\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\nconst doctype = /^<!DOCTYPE [^>]+>/i\r\n// #7298: escape - to avoid being passed as HTML comment when inlined in page\r\nconst comment = /^<!\\--/\r\nconst conditionalComment = /^<!\\[/\r\n\r\n/* <div id=\"app\">\r\n  <p>模板语法：{{a}}</p>\r\n  <p>\r\n    <span>双向绑定：{{b}}</span>\r\n    <input type=\"text\" v-model=\"b\" />\r\n  </p>\r\n</div> */\r\n\r\nexport function template2Ast(html) {\r\n  let text,\r\n    root,\r\n    currentParent,\r\n    stack = []\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag()\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n\r\n      const endTagMatch = parseEndTag()\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch[1])\r\n        continue\r\n      }\r\n    }\r\n    if (textEnd > 0) {\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      advance(text.length)\r\n      chars(text)\r\n    }\r\n  }\r\n\r\n  function advance(n) {\r\n    html = html.substring(n)\r\n  }\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen)\r\n\r\n    let end, attrs\r\n\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      advance(start[0].length)\r\n      while (\r\n        !(end = html.match(startTagClose)) &&\r\n        (attrs = html.match(attribute))\r\n      ) {\r\n        match.attrs.push({\r\n          name: attrs[1],\r\n          value: attrs[3] || attrs[4] || attrs[5] // 'id=app', \"id=app\", `id=\"app\"都不太一样..`\r\n        })\r\n        advance(attrs[0].length)\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  function parseEndTag() {\r\n    return html.match(endTag)\r\n  }\r\n  function start(tagName, attrs) {\r\n    const element = createAstElement(tagName, attrs)\r\n\r\n    if (!root) {\r\n      root = element\r\n    }\r\n    currentParent = element\r\n    stack.push(element)\r\n  }\r\n  function end(tagName) {\r\n    const element = stack.pop()\r\n    currentParent = stack[stack.length - 1]\r\n    if (currentParent) {\r\n      element.parent = currentParent\r\n      currentParent.children.push(element)\r\n    }\r\n  }\r\n  function chars(text) {\r\n    text = text.trim()\r\n    if (text.length > 0) {\r\n      currentParent.children.push({\r\n        type: 3,\r\n        text\r\n      })\r\n    }\r\n  }\r\n  function createAstElement(tag, attrs) {\r\n    return {\r\n      tag,\r\n      attrs,\r\n      type: 1,\r\n      children: [],\r\n      parent: undefined\r\n    }\r\n  }\r\n\r\n  return root\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\nconst regexEscapeRE = /[-.*+?^${}()|[\\]\\/\\\\]/g\r\n\r\n// _c => createElement\r\n// _v => createTextNode\r\n// _s => {{vale}} => _s(name)\r\n// with(this){return _c('div', {'id':\"app\"},_c('p', undefined,_v(\"模板语法：\"+_s(a))),_c('p', {'style':{\"color\":\" red\",\" font-size\":\" 20px\"}},_c('span', undefined,_v(\"双向绑定：\"+_s(b))),_c('input', {'type':\"text\",'v-model':\"b\"},)))}\r\n\r\nfunction formatProps(attrs) {\r\n  let attrStr = ''\r\n\r\n  attrs.map((attr) => {\r\n    if (attr.name === 'style') {\r\n      let styleAttrs = attr.value.split(';').reduce((res, cur) => {\r\n        const [name, val] = cur.split(':')\r\n        // console.log(name, val)\r\n        res[name] = val\r\n        return res\r\n      }, {})\r\n      attr.value = styleAttrs\r\n    }\r\n\r\n    attrStr += `'${attr.name}':${JSON.stringify(attr.value)},`\r\n  })\r\n  return `{${attrStr.slice(0, -1)}}`\r\n}\r\n\r\nfunction generateChild(node) {\r\n  if (node.type === 1) {\r\n    return generate(node)\r\n  } else if (node.type === 3) {\r\n    let text = node.text\r\n\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v(${JSON.stringify(text)})`\r\n    }\r\n\r\n    let match,\r\n      index,\r\n      lastIndex = (defaultTagRE.lastIndex = 0),\r\n      textArr = []\r\n\r\n    while ((match = defaultTagRE.exec(text))) {\r\n      index = match.index\r\n      if (index > lastIndex) {\r\n        textArr.push(JSON.stringify(text.slice(lastIndex, index)))\r\n      }\r\n      textArr.push(`_s(${match[1].trim()})`)\r\n      lastIndex = index + match[0].length\r\n    }\r\n    if (lastIndex < text.length) {\r\n      textArr.push(JSON.stringify(text.slice(lastIndex)))\r\n    }\r\n\r\n    return `_v(${textArr.join('+')})`\r\n  }\r\n}\r\nfunction getChildren(el) {\r\n  const children = el.children\r\n  if (children) {\r\n    return children.map((c) => generateChild(c)).join(',')\r\n  }\r\n}\r\n\r\nexport function generate(el) {\r\n  let children = getChildren(el)\r\n  let code = `_c('${el.tag}', ${\r\n    el.attrs.length ? `${formatProps(el.attrs)}` : 'undefined'\r\n  },${children ? `${children}` : ''})`\r\n\r\n  return code\r\n}\r\n","import { template2Ast } from './template2Ast.js'\r\nimport { generate } from './generate.js'\r\n\r\nexport function compileToFunctions(template) {\r\n  const ast = template2Ast(template)\r\n  console.log('======ast========', ast)\r\n  const code = generate(ast)\r\n  console.log('=======code=======', code)\r\n  const render = new Function(`\r\n    with(this){return ${code}}\r\n  `)\r\n  console.log('=======render=======', render)\r\n  return {\r\n    ast,\r\n    code,\r\n    render\r\n  }\r\n}\r\n","export function patch(oldNode, vNode) {\r\n  return\r\n  let el = createElement(vNode)\r\n  let parentElement = oldNode.parentNode\r\n  parentElement.insertBefore(el, oldNode.nextSibling)\r\n  parentElement.removeChild(oldNode)\r\n}\r\n\r\nfunction createElement(vnode) {\r\n  const { tag, props, children, text } = vnode\r\n  if (typeof tag === 'string') {\r\n    vnode.el = document.createElement(tag)\r\n    updateProps(vnode)\r\n    children.map((child) => {\r\n      vnode.el.appendChild(createElement(child))\r\n    })\r\n  } else {\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n\r\n  return vnode.el\r\n}\r\n\r\nfunction updateProps(vnode) {\r\n  const el = vnode.el,\r\n    newProps = vnode.props || {}\r\n\r\n  for (let key in newProps) {\r\n    if (key === 'style') {\r\n      for (const sKey in newProps.style) {\r\n        el.style[sKey] = newProps.style[sKey]\r\n      }\r\n    } else if (key === 'class') {\r\n      el.className = el.class\r\n    } else if (key === 'v-model') {\r\n      // 指令只对v-model做处理~\r\n    } else {\r\n      el.setAttribute(key, newProps[key])\r\n    }\r\n  }\r\n}\r\n","import { compileToFunctions } from './compiler/index.js'\r\nimport { patch } from './vdom/patch.js'\r\n\r\nexport function callHook(vm, hook) {\r\n  // vue内部对生命周期还进行了依赖收集和错误处理\r\n  // hook可能还会是组件的回调事件,这里就这能是生命周期了。。\r\n  // 这里就不会这么复杂去整。。\r\n  const handlers = vm.$options[hook]\r\n  if (handlers) {\r\n    handlers.call(vm)\r\n  }\r\n}\r\n\r\nexport function lifeCycleMixin(Vue) {\r\n  // 渲染优先级,render => template => el\r\n  // 模板 => ast语法树 => 一系列优化 => render函数 => 虚拟dom => patch补丁 => 真实dom\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this\r\n    vm.$el = document.querySelector(el)\r\n    const opts = this.$options\r\n\r\n    if (!opts.render) {\r\n      let template = opts.template\r\n      if (!template) {\r\n        template = vm.$el.outerHTML\r\n      }\r\n      const { render } = compileToFunctions(template)\r\n      opts.render = render\r\n    }\r\n\r\n    mountComponent(vm)\r\n  }\r\n\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this\r\n    patch(vm.$el, vnode)\r\n  }\r\n}\r\n\r\n// 编译完成之后的真正挂载\r\nfunction mountComponent(vm) {\r\n  vm._update(vm._render())\r\n}\r\n","import { initState } from './state.js'\r\nimport { callHook } from './lifecycle.js'\r\nimport Compiler from './compiler/base.js'\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this\r\n    vm.$options = options\r\n    callHook(vm, 'beforeCreate')\r\n    // 初始化状态\r\n    initState(vm)\r\n    callHook(vm, 'created')\r\n    // 最简单的双向绑定编译\r\n    new Compiler(vm.$options.el, vm)\r\n    // 模板编译挂载\r\n    // vm.$mount(vm.$options.el)\r\n    callHook(vm, 'mounted')\r\n  }\r\n}\r\n","export function createElement(tag, attrs = {}, ...children) {\r\n  return vnode(tag, attrs, children)\r\n}\r\nexport function cteateTextVnode(text) {\r\n  return vnode(undefined, undefined, undefined, text)\r\n}\r\n\r\nfunction vnode(tag, props, children, text) {\r\n  return {\r\n    tag,\r\n    props,\r\n    children,\r\n    text\r\n  }\r\n}\r\n","import { createElement, cteateTextVnode } from './vnode.js'\r\n\r\nexport function renderMixin(Vue) {\r\n  Vue.prototype._c = function () {\r\n    return createElement(...arguments)\r\n  }\r\n  Vue.prototype._s = function (value) {\r\n    if (value === null) return\r\n    return typeof value === 'object' ? JSON.stringify(value) : value\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    return cteateTextVnode(text)\r\n  }\r\n  // render函数转为虚拟dom\r\n  Vue.prototype._render = function () {\r\n    const vm = this,\r\n      render = vm.$options.render,\r\n      vnode = render.call(vm)\r\n    console.log('=======vnode==========', vnode)\r\n    return vnode\r\n  }\r\n}\r\n","import { initMixin } from './init.js'\r\nimport { stateMixin } from './state.js'\r\nimport { lifeCycleMixin } from './lifecycle.js'\r\nimport { renderMixin } from './vdom/index.js'\r\n\r\nfunction Vue(options) {\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\nstateMixin(Vue)\r\nlifeCycleMixin(Vue)\r\nrenderMixin(Vue)\r\n\r\nexport default Vue\r\n"],"names":["isObject","data","oldArrayMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","console","log","args","result","apply","inserted","ob","__ob__","slice","observerArray","Dep","subs","target","addDep","watcher","push","sub","update","targetStack","pushTarget","popTarget","pop","length","Observer","value","defineProperty","isArray","__proto__","observeArray","walk","i","observe","keys","key","defineReactive","proxy","vm","configurable","enumerable","get","_data","set","newVal","dep","addSub","notify","Watcher","excepssion","cb","options","newDeps","getVal","user","lazy","val","split","arr","k","oldVal","call","Compiler","el","init","$el","document","querySelector","fragment","createDocumentFragment","child","firstChild","appendChild","replace","frag","compilerText","node","txt","textContent","reg","test","trim","RegExp","$1","compilerEle","nodeAttr","attributes","from","attr","name","exp","includes","addEventListener","e","newval","childNodes","nodeType","initState","opts","$options","props","initMethod","initData","computed","watch","initWatch","stateMixin","Vue","$watch","expOrFn","immediate","unwatchFn","teardown","createWatcher","handler","bind","watchs","attribute","unicodeRegExp","ncname","source","qnameCapture","startTagOpen","startTagClose","endTag","template2Ast","html","text","root","currentParent","stack","textEnd","indexOf","startTagMatch","parseStartTag","start","tagName","attrs","endTagMatch","parseEndTag","advance","end","substring","chars","n","match","element","createAstElement","parent","children","type","tag","undefined","defaultTagRE","formatProps","attrStr","map","styleAttrs","reduce","res","cur","JSON","stringify","generateChild","generate","index","lastIndex","textArr","exec","join","getChildren","c","code","compileToFunctions","template","ast","render","Function","patch","oldNode","vNode","callHook","hook","handlers","lifeCycleMixin","$mount","outerHTML","mountComponent","_update","vnode","_render","initMixin","_init","createElement","cteateTextVnode","renderMixin","_c","arguments","_s","_v"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;EAC7B,SAAO,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAA5C;EACD;;ECFD;EACA;EAEA,IAAIC,eAAe,GAAGC,KAAK,CAACC,SAA5B;;EAGO,IAAMC,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcL,eAAd,CAArB;EAEP,IAAMM,OAAO,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,SAAlB,EAA6B,KAA7B,EAAoC,MAApC,EAA4C,QAA5C,EAAsD,SAAtD,CAAhB;EAEAA,OAAO,CAACC,OAAR,CAAgB,UAACC,MAAD,EAAY;EAC1BL,EAAAA,YAAY,CAACK,MAAD,CAAZ,GAAuB,YAAmB;EACxCC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;;EADwC,sCAANC,IAAM;EAANA,MAAAA,IAAM;EAAA;;EAExC,QAAMC,MAAM,GAAGZ,eAAe,CAACQ,MAAD,CAAf,CAAwBK,KAAxB,CAA8B,IAA9B,EAAoCF,IAApC,CAAf,CAFwC;;EAIxC,QAAIG,QAAJ;EACA,QAAIC,EAAE,GAAG,KAAKC,MAAd;;EACA,YAAQR,MAAR;EACE,WAAK,MAAL;EACA,WAAK,SAAL;EACEM,QAAAA,QAAQ,GAAGH,IAAX;EACA;;EACF,WAAK,QAAL;EACEG,QAAAA,QAAQ,GAAGH,IAAI,CAACM,KAAL,CAAW,CAAX,CAAX;EANJ;;EAUA,QAAIH,QAAJ,EAAcC,EAAE,CAACG,aAAH,CAAiBJ,QAAjB;EAEd,WAAOF,MAAP;EACD,GAnBD;EAoBD,CArBD;;MCVaO,GAAb;EACE,iBAAc;EAAA;;EACZ,SAAKC,IAAL,GAAY,EAAZ;EACD;;EAHH;EAAA;EAAA,6BAIW;EACP,UAAID,GAAG,CAACE,MAAR,EAAgB;EACdF,QAAAA,GAAG,CAACE,MAAJ,CAAWC,MAAX,CAAkB,IAAlB;EACD;EACF;EARH;EAAA;EAAA,2BASSC,OATT,EASkB;EACd,WAAKH,IAAL,CAAUI,IAAV,CAAeD,OAAf;EACD;EAXH;EAAA;EAAA,6BAYW;EACP,WAAKH,IAAL,CAAUb,OAAV,CAAkB,UAACkB,GAAD;EAAA,eAASA,GAAG,CAACC,MAAJ,EAAT;EAAA,OAAlB;EACD;EAdH;;EAAA;EAAA;EAkBA;;EACAP,GAAG,CAACE,MAAJ,GAAa,IAAb;EACA,IAAMM,WAAW,GAAG,EAApB;EACO,SAASC,UAAT,CAAoBP,MAApB,EAA4B;EACjCM,EAAAA,WAAW,CAACH,IAAZ,CAAiBH,MAAjB;EACAF,EAAAA,GAAG,CAACE,MAAJ,GAAaA,MAAb;EACD;EACM,SAASQ,SAAT,GAAqB;EAC1BF,EAAAA,WAAW,CAACG,GAAZ;EACAX,EAAAA,GAAG,CAACE,MAAJ,GAAaM,WAAW,CAACA,WAAW,CAACI,MAAZ,GAAqB,CAAtB,CAAxB;EACD;;MCxBKC;EACJ,oBAAYC,KAAZ,EAAmB;EAAA;;EACjB;EACA;EACA;EACA7B,IAAAA,MAAM,CAAC8B,cAAP,CAAsBD,KAAtB,EAA6B,QAA7B,EAAuC,IAAvC;;EAEA,QAAIhC,KAAK,CAACkC,OAAN,CAAcF,KAAd,CAAJ,EAA0B;EACxBA,MAAAA,KAAK,CAACG,SAAN,GAAkBjC,YAAlB,CADwB;EAGxB;;EACA,WAAKkC,YAAL,CAAkBJ,KAAlB;EACD,KALD,MAKO;EACL,WAAKK,IAAL,CAAUL,KAAV;EACD;EACF;;;;mCACYA,OAAO;EAClB,WAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,KAAK,CAACF,MAA1B,EAAkCQ,CAAC,EAAnC,EAAuC;EACrCC,QAAAA,OAAO,CAACP,KAAK,CAACM,CAAD,CAAN,CAAP;EACD;EACF;;;2BACIxC,MAAM;EACTK,MAAAA,MAAM,CAACqC,IAAP,CAAY1C,IAAZ,EAAkBQ,OAAlB,CAA0B,UAACmC,GAAD,EAAS;EACjCC,QAAAA,cAAc,CAAC5C,IAAD,EAAO2C,GAAP,EAAY3C,IAAI,CAAC2C,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;;;;EAGI,SAASE,KAAT,CAAeC,EAAf,EAAmB9C,IAAnB,EAAyB;EAC9BK,EAAAA,MAAM,CAACqC,IAAP,CAAY1C,IAAZ,EAAkBQ,OAAlB,CAA0B,UAACmC,GAAD,EAAS;EACjCtC,IAAAA,MAAM,CAAC8B,cAAP,CAAsBW,EAAtB,EAA0BH,GAA1B,EAA+B;EAC7BI,MAAAA,YAAY,EAAE,IADe;EAE7BC,MAAAA,UAAU,EAAE,IAFiB;EAG7BC,MAAAA,GAAG,EAAE,eAAY;EACf,eAAOH,EAAE,CAACI,KAAH,CAASP,GAAT,CAAP;EACD,OAL4B;EAM7BQ,MAAAA,GAAG,EAAE,aAAUC,MAAV,EAAkB;EACrBN,QAAAA,EAAE,CAACI,KAAH,CAASP,GAAT,IAAgBS,MAAhB;EACD;EAR4B,KAA/B;EAUD,GAXD;EAYD;;EAED,SAASR,cAAT,CAAwB5C,IAAxB,EAA8B2C,GAA9B,EAAmCT,KAAnC,EAA0C;EACxCO,EAAAA,OAAO,CAACP,KAAD,CAAP;EACA,MAAMmB,GAAG,GAAG,IAAIjC,GAAJ,EAAZ;EACAf,EAAAA,MAAM,CAAC8B,cAAP,CAAsBnC,IAAtB,EAA4B2C,GAA5B,EAAiC;EAC/BM,IAAAA,GAD+B,iBACzB;EACJ;EACA7B,MAAAA,GAAG,CAACE,MAAJ,IAAc+B,GAAG,CAACC,MAAJ,CAAWlC,GAAG,CAACE,MAAf,CAAd;EACA,aAAOY,KAAP;EACD,KAL8B;EAM/BiB,IAAAA,GAN+B,eAM3BC,MAN2B,EAMnB;EACV,UAAIA,MAAM,KAAKlB,KAAf,EAAsB;EACpB;EACD;;EACDO,MAAAA,OAAO,CAACP,KAAD,CAAP;EACAA,MAAAA,KAAK,GAAGkB,MAAR,CALU;;EAOVC,MAAAA,GAAG,CAACE,MAAJ;EACD;EAd8B,GAAjC;EAgBD;;EAEM,SAASd,OAAT,CAAiBzC,IAAjB,EAAuB;EAC5B,MAAI,CAACD,QAAQ,CAACC,IAAD,CAAb,EAAqB;EACnB;EACD;;EACD,SAAO,IAAIiC,QAAJ,CAAajC,IAAb,CAAP;EACD;;ECtED;;MACawD,OAAb;EACE,mBAAYV,EAAZ,EAAgBW,UAAhB,EAA4BC,EAA5B,EAA8C;EAAA,QAAdC,OAAc,uEAAJ,EAAI;;EAAA;;EAC5C,SAAKb,EAAL,GAAUA,EAAV;EACA,SAAKW,UAAL,GAAkBA,UAAlB,CAF4C;;EAG5C,SAAKC,EAAL,GAAUA,EAAV;EACA,SAAKE,OAAL,GAAe,EAAf;EACA,SAAK1B,KAAL,GAAa,KAAK2B,MAAL,EAAb,CAL4C;EAO5C;EACA;EACA;;EACA,QAAI,CAACF,OAAO,CAACG,IAAT,IAAiB,CAACH,OAAO,CAACI,IAA9B,EAAoC;EAClC,WAAKL,EAAL,CAAQ,KAAKxB,KAAb;EACD;EACF;;EAdH;EAAA;EAAA,6BAeW;EACPL,MAAAA,UAAU,CAAC,IAAD,CAAV;EACA,UAAImC,GAAG,GAAG,KAAKlB,EAAf,CAFO;;EAIP,WAAKW,UAAL,CAAgBQ,KAAhB,CAAsB,GAAtB,EAA2BzD,OAA3B,CAAmC,UAACmC,GAAD,EAAS;EAC1C;EACAqB,QAAAA,GAAG,GAAGA,GAAG,CAACrB,GAAD,CAAT;EACD,OAHD;EAIAb,MAAAA,SAAS;EACT,aAAOkC,GAAP;EACD;EAzBH;EAAA;EAAA,2BA0BSX,GA1BT,EA0Bc;EACV,WAAKO,OAAL,CAAanC,IAAb,CAAkB4B,GAAlB;EACD;EA5BH;EAAA;EAAA,6BA6BW;EACP,UAAIa,GAAG,GAAG,KAAKT,UAAL,CAAgBQ,KAAhB,CAAsB,GAAtB,CAAV;EACA,UAAID,GAAG,GAAG,KAAKlB,EAAf;EACAoB,MAAAA,GAAG,CAAC1D,OAAJ,CAAY,UAAC2D,CAAD,EAAO;EACjBH,QAAAA,GAAG,GAAGA,GAAG,CAACG,CAAD,CAAT;EACD,OAFD;EAGA,UAAMC,MAAM,GAAG,KAAKlC,KAApB;EACA,WAAKA,KAAL,GAAa8B,GAAb;EACA,WAAKN,EAAL,CAAQW,IAAR,CAAa,KAAKvB,EAAlB,EAAsBkB,GAAtB,EAA2BI,MAA3B;EACD;EAtCH;;EAAA;EAAA;;ECFA;EACA;EACA;EACA;;MACqBE;EACnB,oBAAYC,EAAZ,EAAgBzB,EAAhB,EAAoB;EAAA;;EAClB,SAAK0B,IAAL,CAAUD,EAAV,EAAczB,EAAd;EACD;;;;2BACIyB,IAAIzB,IAAI;EACXA,MAAAA,EAAE,CAAC2B,GAAH,GAASC,QAAQ,CAACC,aAAT,CAAuBJ,EAAvB,CAAT,CADW;;EAGX,UAAIK,QAAQ,GAAGF,QAAQ,CAACG,sBAAT,EAAf;EACA,UAAIC,KAAJ;;EACA,aAAQA,KAAK,GAAGhC,EAAE,CAAC2B,GAAH,CAAOM,UAAvB,EAAoC;EAClCH,QAAAA,QAAQ,CAACI,WAAT,CAAqBF,KAArB;EACD;;EACD,WAAKG,OAAL,CAAaL,QAAb,EAAuB9B,EAAvB;EACAA,MAAAA,EAAE,CAAC2B,GAAH,CAAOO,WAAP,CAAmBJ,QAAnB;EACD;;;8BACOM,MAAMpC,IAAI;EAAA;;EAChB,eAASqC,YAAT,CAAsBC,IAAtB,EAA4B;EAC1B,YAAIC,GAAG,GAAGD,IAAI,CAACE,WAAf;EACA,YAAIC,GAAG,GAAG,gBAAV;;EACA,YAAIA,GAAG,CAACC,IAAJ,CAASH,GAAT,CAAJ,EAAmB;EACjB,cAAI1D,MAAM,GAAG,SAATA,MAAS,CAACqC,GAAD;EAAA,mBAAUoB,IAAI,CAACE,WAAL,GAAmBD,GAAG,CAACJ,OAAJ,CAAYM,GAAZ,EAAiBvB,GAAjB,EAAsByB,IAAtB,EAA7B;EAAA,WAAb;;EACA,cAAIjE,OAAO,GAAG,IAAIgC,OAAJ,CAAYV,EAAZ,EAAgB4C,MAAM,CAACC,EAAvB,EAA2BhE,MAA3B,CAAd;EACAA,UAAAA,MAAM,CAACH,OAAO,CAACU,KAAT,CAAN;EACD;EACF;;EACD,eAAS0D,WAAT,CAAqBR,IAArB,EAA2B;EACzB,YAAIS,QAAQ,GAAGT,IAAI,CAACU,UAApB;EACA5F,QAAAA,KAAK,CAAC6F,IAAN,CAAWF,QAAX,EAAqBrF,OAArB,CAA6B,UAACwF,IAAD,EAAU;EACrC,cAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;EAAA,cACEC,GAAG,GAAGF,IAAI,CAAC9D,KADb;;EAEA,cAAI+D,IAAI,CAACE,QAAL,CAAc,IAAd,KAAuBF,IAAI,CAACE,QAAL,CAAc,GAAd,CAA3B,EAA+C;EAC7C;EACA;EACA,gBAAIxE,MAAM,GAAG,SAATA,MAAS,CAACqC,GAAD;EAAA,qBAAUoB,IAAI,CAAClD,KAAL,GAAa8B,GAAvB;EAAA,aAAb;;EACA,gBAAIxC,OAAO,GAAG,IAAIgC,OAAJ,CAAYV,EAAZ,EAAgBoD,GAAhB,EAAqBvE,MAArB,CAAd;EACAyD,YAAAA,IAAI,CAACgB,gBAAL,CAAsB,OAAtB,EAA+B,UAACC,CAAD,EAAO;EACpC,kBAAIC,MAAM,GAAGD,CAAC,CAAC/E,MAAF,CAASY,KAAtB;EACAY,cAAAA,EAAE,CAACoD,GAAD,CAAF,GAAUI,MAAV;EACD,aAHD;EAIA3E,YAAAA,MAAM,CAACH,OAAO,CAACU,KAAT,CAAN;EACD;EACF,SAdD;EAeD;;EACDhC,MAAAA,KAAK,CAAC6F,IAAN,CAAWb,IAAI,CAACqB,UAAhB,EAA4B/F,OAA5B,CAAoC,UAAC4E,IAAD,EAAU;EAC5C,YAAIA,IAAI,CAACoB,QAAL,KAAkB,CAAtB,EAAyB;EACvB;EACArB,UAAAA,YAAY,CAACC,IAAD,CAAZ;EACD,SAHD,MAGO,IAAIA,IAAI,CAACoB,QAAL,KAAkB,CAAtB,EAAyB;EAC9B;EACAZ,UAAAA,WAAW,CAACR,IAAD,CAAX;EACD;;EACD,YAAIA,IAAI,CAACmB,UAAL,IAAmBnB,IAAI,CAACmB,UAAL,CAAgBvE,MAAvC,EAA+C;EAC7C,UAAA,KAAI,CAACiD,OAAL,CAAaG,IAAb,EAAmBtC,EAAnB;EACD;EACF,OAXD;EAYD;;;;;;ECxDI,SAAS2D,SAAT,CAAmB3D,EAAnB,EAAuB;EAC5B,MAAM4D,IAAI,GAAG5D,EAAE,CAAC6D,QAAhB;;EAEA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACnG,OAAT,EAAkB;EAChBsG,IAAAA,UAAU,CAAC/D,EAAD,CAAV;EACD;;EACD,MAAI4D,IAAI,CAAC1G,IAAT,EAAe;EACb8G,IAAAA,QAAQ,CAAChE,EAAD,CAAR;EACD;;EACD,MAAI4D,IAAI,CAACK,QAAT,EAAmB;;EAGnB,MAAIL,IAAI,CAACM,KAAT,EAAgB;EACdC,IAAAA,SAAS,CAACnE,EAAD,CAAT;EACD;EACF;EAEM,SAASoE,UAAT,CAAoBC,GAApB,EAAyB;EAC9BA,EAAAA,GAAG,CAAChH,SAAJ,CAAciH,MAAd,GAAuB,UAAUC,OAAV,EAAmB3D,EAAnB,EAAuBC,OAAvB,EAAgC;EACrD,QAAMb,EAAE,GAAG,IAAX;EACAa,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;EACAA,IAAAA,OAAO,CAACG,IAAR,GAAe,IAAf;EACA,QAAMtC,OAAO,GAAG,IAAIgC,OAAJ,CAAYV,EAAZ,EAAgBuE,OAAhB,EAAyB3D,EAAzB,EAA6BC,OAA7B,CAAhB,CAJqD;;EAMrD,QAAIA,OAAO,CAAC2D,SAAZ,EAAuB;EACrB5D,MAAAA,EAAE,CAACW,IAAH,CAAQvB,EAAR,EAAYtB,OAAO,CAACU,KAApB;EACD;;EACD,WAAO,SAASqF,SAAT,GAAqB;EAC1B/F,MAAAA,OAAO,CAACgG,QAAR;EACD,KAFD;EAGD,GAZD;EAaD;;EACD,SAASC,aAAT,CAAuB3E,EAAvB,EAA2BuE,OAA3B,EAAoCK,OAApC,EAA6C/D,OAA7C,EAAsD;EACpD,MAAI5D,QAAQ,CAAC2H,OAAD,CAAZ,EAAuB;EACrB/D,IAAAA,OAAO,GAAG+D,OAAV;EACAA,IAAAA,OAAO,GAAGA,OAAO,CAACA,OAAlB;EACD;;EACD,MAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;EAC/BA,IAAAA,OAAO,GAAG5E,EAAE,CAAC4E,OAAD,CAAZ;EACD;;EACD,SAAO5E,EAAE,CAACsE,MAAH,CAAUC,OAAV,EAAmBK,OAAnB,EAA4B/D,OAA5B,CAAP;EACD;;EAGD,SAASkD,UAAT,CAAoB/D,EAApB,EAAwB;EACtB,MAAIvC,OAAO,GAAGuC,EAAE,CAAC6D,QAAH,CAAYpG,OAA1B;;EACA,OAAK,IAAMoC,GAAX,IAAkBpC,OAAlB,EAA2B;EACzBuC,IAAAA,EAAE,CAACH,GAAD,CAAF,GAAUpC,OAAO,CAACoC,GAAD,CAAP,CAAagF,IAAb,CAAkB7E,EAAlB,CAAV;EACD;EACF;;EACD,SAASgE,QAAT,CAAkBhE,EAAlB,EAAsB;EACpB;EACA;EACA,MAAI9C,IAAI,GAAG8C,EAAE,CAAC6D,QAAH,CAAY3G,IAAvB;EACAA,EAAAA,IAAI,GAAG8C,EAAE,CAACI,KAAH,GAAW,OAAOlD,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACqE,IAAL,CAAUvB,EAAV,CAA7B,GAA6C9C,IAA/D,CAJoB;;EAMpB6C,EAAAA,KAAK,CAACC,EAAD,EAAK9C,IAAL,CAAL,CANoB;;EAQpByC,EAAAA,OAAO,CAACzC,IAAD,CAAP,CARoB;EAUpB;EACD;;EAED,SAASiH,SAAT,CAAmBnE,EAAnB,EAAuB;EACrB,MAAI8E,MAAM,GAAG9E,EAAE,CAAC6D,QAAH,CAAYK,KAAzB;;EACA,OAAK,IAAMrE,GAAX,IAAkBiF,MAAlB,EAA0B;EACxB,QAAMF,OAAO,GAAGE,MAAM,CAACjF,GAAD,CAAtB,CADwB;;EAGxB,QAAIzC,KAAK,CAACkC,OAAN,CAAcsF,OAAd,CAAJ,EAA4B;EAC1B,WAAK,IAAIlF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkF,OAAO,CAAC1F,MAA5B,EAAoCQ,CAAC,EAArC,EAAyC;EACvCiF,QAAAA,aAAa,CAAC3E,EAAD,EAAKH,GAAL,EAAU+E,OAAO,CAAClF,CAAD,CAAjB,CAAb;EACD;EACF,KAJD,MAIO;EACLiF,MAAAA,aAAa,CAAC3E,EAAD,EAAKH,GAAL,EAAU+E,OAAV,CAAb;EACD;EACF;EACF;;ECpFD;EACA,IAAMG,SAAS,GAAG,2EAAlB;EAEA,IAAMC,aAAa,GAAG,6JAAtB;EACA,IAAMC,MAAM,uCAAgCD,aAAa,CAACE,MAA9C,OAAZ;EACA,IAAMC,YAAY,iBAAUF,MAAV,kBAAwBA,MAAxB,MAAlB;EACA,IAAMG,YAAY,GAAG,IAAIxC,MAAJ,aAAgBuC,YAAhB,EAArB;EACA,IAAME,aAAa,GAAG,YAAtB;EACA,IAAMC,MAAM,GAAG,IAAI1C,MAAJ,gBAAmBuC,YAAnB,YAAf;EAMA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEO,SAASI,YAAT,CAAsBC,IAAtB,EAA4B;EACjC,MAAIC,IAAJ;EAAA,MACEC,IADF;EAAA,MAEEC,aAFF;EAAA,MAGEC,KAAK,GAAG,EAHV;;EAKA,SAAOJ,IAAP,EAAa;EACX,QAAIK,OAAO,GAAGL,IAAI,CAACM,OAAL,CAAa,GAAb,CAAd;;EACA,QAAID,OAAO,KAAK,CAAhB,EAAmB;EACjB,UAAME,aAAa,GAAGC,aAAa,EAAnC;;EACA,UAAID,aAAJ,EAAmB;EACjBE,QAAAA,KAAK,CAACF,aAAa,CAACG,OAAf,EAAwBH,aAAa,CAACI,KAAtC,CAAL;EACA;EACD;;EAED,UAAMC,WAAW,GAAGC,WAAW,EAA/B;;EACA,UAAID,WAAJ,EAAiB;EACfE,QAAAA,OAAO,CAACF,WAAW,CAAC,CAAD,CAAX,CAAelH,MAAhB,CAAP;EACAqH,QAAAA,GAAG,CAACH,WAAW,CAAC,CAAD,CAAZ,CAAH;EACA;EACD;EACF;;EACD,QAAIP,OAAO,GAAG,CAAd,EAAiB;EACfJ,MAAAA,IAAI,GAAGD,IAAI,CAACgB,SAAL,CAAe,CAAf,EAAkBX,OAAlB,CAAP;EACD;;EACD,QAAIJ,IAAJ,EAAU;EACRa,MAAAA,OAAO,CAACb,IAAI,CAACvG,MAAN,CAAP;EACAuH,MAAAA,KAAK,CAAChB,IAAD,CAAL;EACD;EACF;;EAED,WAASa,OAAT,CAAiBI,CAAjB,EAAoB;EAClBlB,IAAAA,IAAI,GAAGA,IAAI,CAACgB,SAAL,CAAeE,CAAf,CAAP;EACD;;EACD,WAASV,aAAT,GAAyB;EACvB,QAAMC,KAAK,GAAGT,IAAI,CAACmB,KAAL,CAAWvB,YAAX,CAAd;EAEA,QAAImB,GAAJ,EAASJ,KAAT;;EAEA,QAAIF,KAAJ,EAAW;EACT,UAAMU,KAAK,GAAG;EACZT,QAAAA,OAAO,EAAED,KAAK,CAAC,CAAD,CADF;EAEZE,QAAAA,KAAK,EAAE;EAFK,OAAd;EAIAG,MAAAA,OAAO,CAACL,KAAK,CAAC,CAAD,CAAL,CAAS/G,MAAV,CAAP;;EACA,aACE,EAAEqH,GAAG,GAAGf,IAAI,CAACmB,KAAL,CAAWtB,aAAX,CAAR,MACCc,KAAK,GAAGX,IAAI,CAACmB,KAAL,CAAW5B,SAAX,CADT,CADF,EAGE;EACA4B,QAAAA,KAAK,CAACR,KAAN,CAAYxH,IAAZ,CAAiB;EACfwE,UAAAA,IAAI,EAAEgD,KAAK,CAAC,CAAD,CADI;EAEf/G,UAAAA,KAAK,EAAE+G,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD,CAAjB,IAAwBA,KAAK,CAAC,CAAD,CAFrB;;EAAA,SAAjB;EAIAG,QAAAA,OAAO,CAACH,KAAK,CAAC,CAAD,CAAL,CAASjH,MAAV,CAAP;EACD;;EACD,UAAIqH,GAAJ,EAAS;EACPD,QAAAA,OAAO,CAACC,GAAG,CAAC,CAAD,CAAH,CAAOrH,MAAR,CAAP;EACA,eAAOyH,KAAP;EACD;EACF;EACF;;EAED,WAASN,WAAT,GAAuB;EACrB,WAAOb,IAAI,CAACmB,KAAL,CAAWrB,MAAX,CAAP;EACD;;EACD,WAASW,KAAT,CAAeC,OAAf,EAAwBC,KAAxB,EAA+B;EAC7B,QAAMS,OAAO,GAAGC,gBAAgB,CAACX,OAAD,EAAUC,KAAV,CAAhC;;EAEA,QAAI,CAACT,IAAL,EAAW;EACTA,MAAAA,IAAI,GAAGkB,OAAP;EACD;;EACDjB,IAAAA,aAAa,GAAGiB,OAAhB;EACAhB,IAAAA,KAAK,CAACjH,IAAN,CAAWiI,OAAX;EACD;;EACD,WAASL,GAAT,CAAaL,OAAb,EAAsB;EACpB,QAAMU,OAAO,GAAGhB,KAAK,CAAC3G,GAAN,EAAhB;EACA0G,IAAAA,aAAa,GAAGC,KAAK,CAACA,KAAK,CAAC1G,MAAN,GAAe,CAAhB,CAArB;;EACA,QAAIyG,aAAJ,EAAmB;EACjBiB,MAAAA,OAAO,CAACE,MAAR,GAAiBnB,aAAjB;EACAA,MAAAA,aAAa,CAACoB,QAAd,CAAuBpI,IAAvB,CAA4BiI,OAA5B;EACD;EACF;;EACD,WAASH,KAAT,CAAehB,IAAf,EAAqB;EACnBA,IAAAA,IAAI,GAAGA,IAAI,CAAC9C,IAAL,EAAP;;EACA,QAAI8C,IAAI,CAACvG,MAAL,GAAc,CAAlB,EAAqB;EACnByG,MAAAA,aAAa,CAACoB,QAAd,CAAuBpI,IAAvB,CAA4B;EAC1BqI,QAAAA,IAAI,EAAE,CADoB;EAE1BvB,QAAAA,IAAI,EAAJA;EAF0B,OAA5B;EAID;EACF;;EACD,WAASoB,gBAAT,CAA0BI,GAA1B,EAA+Bd,KAA/B,EAAsC;EACpC,WAAO;EACLc,MAAAA,GAAG,EAAHA,GADK;EAELd,MAAAA,KAAK,EAALA,KAFK;EAGLa,MAAAA,IAAI,EAAE,CAHD;EAILD,MAAAA,QAAQ,EAAE,EAJL;EAKLD,MAAAA,MAAM,EAAEI;EALH,KAAP;EAOD;;EAED,SAAOxB,IAAP;EACD;;EC5HD,IAAMyB,YAAY,GAAG,0BAArB;EAIA;EACA;EACA;;EAEA,SAASC,WAAT,CAAqBjB,KAArB,EAA4B;EAC1B,MAAIkB,OAAO,GAAG,EAAd;EAEAlB,EAAAA,KAAK,CAACmB,GAAN,CAAU,UAACpE,IAAD,EAAU;EAClB,QAAIA,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;EACzB,UAAIoE,UAAU,GAAGrE,IAAI,CAAC9D,KAAL,CAAW+B,KAAX,CAAiB,GAAjB,EAAsBqG,MAAtB,CAA6B,UAACC,GAAD,EAAMC,GAAN,EAAc;EAAA,yBACtCA,GAAG,CAACvG,KAAJ,CAAU,GAAV,CADsC;EAAA;EAAA,YACnDgC,IADmD;EAAA,YAC7CjC,GAD6C;;;EAG1DuG,QAAAA,GAAG,CAACtE,IAAD,CAAH,GAAYjC,GAAZ;EACA,eAAOuG,GAAP;EACD,OALgB,EAKd,EALc,CAAjB;EAMAvE,MAAAA,IAAI,CAAC9D,KAAL,GAAamI,UAAb;EACD;;EAEDF,IAAAA,OAAO,eAAQnE,IAAI,CAACC,IAAb,eAAsBwE,IAAI,CAACC,SAAL,CAAe1E,IAAI,CAAC9D,KAApB,CAAtB,MAAP;EACD,GAZD;EAaA,oBAAWiI,OAAO,CAACjJ,KAAR,CAAc,CAAd,EAAiB,CAAC,CAAlB,CAAX;EACD;;EAED,SAASyJ,aAAT,CAAuBvF,IAAvB,EAA6B;EAC3B,MAAIA,IAAI,CAAC0E,IAAL,KAAc,CAAlB,EAAqB;EACnB,WAAOc,QAAQ,CAACxF,IAAD,CAAf;EACD,GAFD,MAEO,IAAIA,IAAI,CAAC0E,IAAL,KAAc,CAAlB,EAAqB;EAC1B,QAAIvB,IAAI,GAAGnD,IAAI,CAACmD,IAAhB;;EAEA,QAAI,CAAC0B,YAAY,CAACzE,IAAb,CAAkB+C,IAAlB,CAAL,EAA8B;EAC5B,0BAAakC,IAAI,CAACC,SAAL,CAAenC,IAAf,CAAb;EACD;;EAED,QAAIkB,KAAJ;EAAA,QACEoB,KADF;EAAA,QAEEC,SAAS,GAAIb,YAAY,CAACa,SAAb,GAAyB,CAFxC;EAAA,QAGEC,OAAO,GAAG,EAHZ;;EAKA,WAAQtB,KAAK,GAAGQ,YAAY,CAACe,IAAb,CAAkBzC,IAAlB,CAAhB,EAA0C;EACxCsC,MAAAA,KAAK,GAAGpB,KAAK,CAACoB,KAAd;;EACA,UAAIA,KAAK,GAAGC,SAAZ,EAAuB;EACrBC,QAAAA,OAAO,CAACtJ,IAAR,CAAagJ,IAAI,CAACC,SAAL,CAAenC,IAAI,CAACrH,KAAL,CAAW4J,SAAX,EAAsBD,KAAtB,CAAf,CAAb;EACD;;EACDE,MAAAA,OAAO,CAACtJ,IAAR,cAAmBgI,KAAK,CAAC,CAAD,CAAL,CAAShE,IAAT,EAAnB;EACAqF,MAAAA,SAAS,GAAGD,KAAK,GAAGpB,KAAK,CAAC,CAAD,CAAL,CAASzH,MAA7B;EACD;;EACD,QAAI8I,SAAS,GAAGvC,IAAI,CAACvG,MAArB,EAA6B;EAC3B+I,MAAAA,OAAO,CAACtJ,IAAR,CAAagJ,IAAI,CAACC,SAAL,CAAenC,IAAI,CAACrH,KAAL,CAAW4J,SAAX,CAAf,CAAb;EACD;;EAED,wBAAaC,OAAO,CAACE,IAAR,CAAa,GAAb,CAAb;EACD;EACF;;EACD,SAASC,WAAT,CAAqB3G,EAArB,EAAyB;EACvB,MAAMsF,QAAQ,GAAGtF,EAAE,CAACsF,QAApB;;EACA,MAAIA,QAAJ,EAAc;EACZ,WAAOA,QAAQ,CAACO,GAAT,CAAa,UAACe,CAAD;EAAA,aAAOR,aAAa,CAACQ,CAAD,CAApB;EAAA,KAAb,EAAsCF,IAAtC,CAA2C,GAA3C,CAAP;EACD;EACF;;EAEM,SAASL,QAAT,CAAkBrG,EAAlB,EAAsB;EAC3B,MAAIsF,QAAQ,GAAGqB,WAAW,CAAC3G,EAAD,CAA1B;EACA,MAAI6G,IAAI,iBAAU7G,EAAE,CAACwF,GAAb,gBACNxF,EAAE,CAAC0E,KAAH,CAASjH,MAAT,aAAqBkI,WAAW,CAAC3F,EAAE,CAAC0E,KAAJ,CAAhC,IAA+C,WADzC,cAEJY,QAAQ,aAAMA,QAAN,IAAmB,EAFvB,MAAR;EAIA,SAAOuB,IAAP;EACD;;ECpEM,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;EAC3C,MAAMC,GAAG,GAAGlD,YAAY,CAACiD,QAAD,CAAxB;EACA5K,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiC4K,GAAjC;EACA,MAAMH,IAAI,GAAGR,QAAQ,CAACW,GAAD,CAArB;EACA7K,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCyK,IAAlC;EACA,MAAMI,MAAM,GAAG,IAAIC,QAAJ,mCACOL,IADP,WAAf;EAGA1K,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoC6K,MAApC;EACA,SAAO;EACLD,IAAAA,GAAG,EAAHA,GADK;EAELH,IAAAA,IAAI,EAAJA,IAFK;EAGLI,IAAAA,MAAM,EAANA;EAHK,GAAP;EAKD;;ECjBM,SAASE,KAAT,CAAeC,OAAf,EAAwBC,KAAxB,EAA+B;EACpC;EAKD;;ECHM,SAASC,QAAT,CAAkB/I,EAAlB,EAAsBgJ,IAAtB,EAA4B;EACjC;EACA;EACA;EACA,MAAMC,QAAQ,GAAGjJ,EAAE,CAAC6D,QAAH,CAAYmF,IAAZ,CAAjB;;EACA,MAAIC,QAAJ,EAAc;EACZA,IAAAA,QAAQ,CAAC1H,IAAT,CAAcvB,EAAd;EACD;EACF;EAEM,SAASkJ,cAAT,CAAwB7E,GAAxB,EAA6B;EAClC;EACA;EACAA,EAAAA,GAAG,CAAChH,SAAJ,CAAc8L,MAAd,GAAuB,UAAU1H,EAAV,EAAc;EACnC,QAAMzB,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAAC2B,GAAH,GAASC,QAAQ,CAACC,aAAT,CAAuBJ,EAAvB,CAAT;EACA,QAAMmC,IAAI,GAAG,KAAKC,QAAlB;;EAEA,QAAI,CAACD,IAAI,CAAC8E,MAAV,EAAkB;EAChB,UAAIF,QAAQ,GAAG5E,IAAI,CAAC4E,QAApB;;EACA,UAAI,CAACA,QAAL,EAAe;EACbA,QAAAA,QAAQ,GAAGxI,EAAE,CAAC2B,GAAH,CAAOyH,SAAlB;EACD;;EAJe,gCAKGb,kBAAkB,CAACC,QAAD,CALrB;EAAA,UAKRE,MALQ,uBAKRA,MALQ;;EAMhB9E,MAAAA,IAAI,CAAC8E,MAAL,GAAcA,MAAd;EACD;;EAEDW,IAAAA,cAAc,CAACrJ,EAAD,CAAd;EACD,GAfD;;EAiBAqE,EAAAA,GAAG,CAAChH,SAAJ,CAAciM,OAAd,GAAwB,UAAUC,KAAV,EAAiB;EACvC,QAAMvJ,EAAE,GAAG,IAAX;EACA4I,IAAAA,KAAK,CAAC5I,EAAE,CAAC2B,GAAJ,CAAL;EACD,GAHD;EAID;;EAGD,SAAS0H,cAAT,CAAwBrJ,EAAxB,EAA4B;EAC1BA,EAAAA,EAAE,CAACsJ,OAAH,CAAWtJ,EAAE,CAACwJ,OAAH,EAAX;EACD;;ECtCM,SAASC,SAAT,CAAmBpF,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAAChH,SAAJ,CAAcqM,KAAd,GAAsB,UAAU7I,OAAV,EAAmB;EACvC,QAAMb,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAAC6D,QAAH,GAAchD,OAAd;EACAkI,IAAAA,QAAQ,CAAC/I,EAAD,EAAK,cAAL,CAAR,CAHuC;;EAKvC2D,IAAAA,SAAS,CAAC3D,EAAD,CAAT;EACA+I,IAAAA,QAAQ,CAAC/I,EAAD,EAAK,SAAL,CAAR,CANuC;;EAQvC,QAAIwB,QAAJ,CAAaxB,EAAE,CAAC6D,QAAH,CAAYpC,EAAzB,EAA6BzB,EAA7B,EARuC;EAUvC;;EACA+I,IAAAA,QAAQ,CAAC/I,EAAD,EAAK,SAAL,CAAR;EACD,GAZD;EAaD;;EClBM,SAAS2J,aAAT,CAAuB1C,GAAvB,EAAqD;EAAA,MAAzBd,KAAyB,uEAAjB,EAAiB;;EAAA,oCAAVY,QAAU;EAAVA,IAAAA,QAAU;EAAA;;EAC1D,SAAOwC,KAAK,CAACtC,GAAD,EAAMd,KAAN,EAAaY,QAAb,CAAZ;EACD;EACM,SAAS6C,eAAT,CAAyBnE,IAAzB,EAA+B;EACpC,SAAO8D,KAAK,CAACrC,SAAD,EAAYA,SAAZ,EAAuBA,SAAvB,EAAkCzB,IAAlC,CAAZ;EACD;;EAED,SAAS8D,KAAT,CAAetC,GAAf,EAAoBnD,KAApB,EAA2BiD,QAA3B,EAAqCtB,IAArC,EAA2C;EACzC,SAAO;EACLwB,IAAAA,GAAG,EAAHA,GADK;EAELnD,IAAAA,KAAK,EAALA,KAFK;EAGLiD,IAAAA,QAAQ,EAARA,QAHK;EAILtB,IAAAA,IAAI,EAAJA;EAJK,GAAP;EAMD;;ECZM,SAASoE,WAAT,CAAqBxF,GAArB,EAA0B;EAC/BA,EAAAA,GAAG,CAAChH,SAAJ,CAAcyM,EAAd,GAAmB,YAAY;EAC7B,WAAOH,aAAa,MAAb,SAAiBI,SAAjB,CAAP;EACD,GAFD;;EAGA1F,EAAAA,GAAG,CAAChH,SAAJ,CAAc2M,EAAd,GAAmB,UAAU5K,KAAV,EAAiB;EAClC,QAAIA,KAAK,KAAK,IAAd,EAAoB;EACpB,WAAO,QAAOA,KAAP,MAAiB,QAAjB,GAA4BuI,IAAI,CAACC,SAAL,CAAexI,KAAf,CAA5B,GAAoDA,KAA3D;EACD,GAHD;;EAIAiF,EAAAA,GAAG,CAAChH,SAAJ,CAAc4M,EAAd,GAAmB,UAAUxE,IAAV,EAAgB;EACjC,WAAOmE,eAAe,CAACnE,IAAD,CAAtB;EACD,GAFD,CAR+B;;;EAY/BpB,EAAAA,GAAG,CAAChH,SAAJ,CAAcmM,OAAd,GAAwB,YAAY;EAClC,QAAMxJ,EAAE,GAAG,IAAX;EAAA,QACE0I,MAAM,GAAG1I,EAAE,CAAC6D,QAAH,CAAY6E,MADvB;EAAA,QAEEa,KAAK,GAAGb,MAAM,CAACnH,IAAP,CAAYvB,EAAZ,CAFV;EAGApC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsC0L,KAAtC;EACA,WAAOA,KAAP;EACD,GAND;EAOD;;EChBD,SAASlF,GAAT,CAAaxD,OAAb,EAAsB;EACpB,OAAK6I,KAAL,CAAW7I,OAAX;EACD;;EAED4I,SAAS,CAACpF,GAAD,CAAT;EACAD,UAAU,CAACC,GAAD,CAAV;EACA6E,cAAc,CAAC7E,GAAD,CAAd;EACAwF,WAAW,CAACxF,GAAD,CAAX;;;;;;;;"}